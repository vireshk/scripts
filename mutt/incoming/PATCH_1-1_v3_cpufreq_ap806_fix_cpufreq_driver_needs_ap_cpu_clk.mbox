From vireshk  Tue Jun 23 08:18:05 2020
Delivered-To: viresh.kumar@linaro.org
Received: from pop.gmail.com [172.217.194.108] 	by vireshk-i7 with POP3 (fetchmail-6.3.26) 	for <vireshk@localhost> (single-drop); Tue, 23 Jun 2020 08:18:05 +0530 (IST)
Received: by 2002:a05:6602:2050:0:0:0:0 with SMTP id z16csp3076159iod;         Mon, 22 Jun 2020 05:01:27 -0700 (PDT)
X-Google-Smtp-Source: ABdhPJzj6i8d+vq7HTc6PRsVGD3l3wVI2FJOeOblTHajIGeciwOyWSa8LKJduJtusxVbmbXhhxq2
X-Received: by 2002:aa7:c245:: with SMTP id y5mr16843808edo.189.1592827287489;         Mon, 22 Jun 2020 05:01:27 -0700 (PDT)
ARC-Seal: i=2; a=rsa-sha256; t=1592827287; cv=pass;         d=google.com; s=arc-20160816;         b=mg65snkwwYEGayTRZ+52dfAJvpBw5oALMmHmrMM3+aMoviOgIz30M4uw4max2kr5Wz          g3Cv/+xDmB1boBg1Z0YFcx6EEubdLX0o1i3kzQgi5rFEygueds9i/SjMvdPRJyZN8BRu          4TjWiMiy9ZdpGUPsOL6LbKhfr9C4NLvvDKchAp2Zgdc06jhlfJTEZaWiySs808mEHN/g          XWBq2Vebg8t0mTOWXeCBJuVti8sZQ9JvBHyVEqk5ABF0DKnCTjiUzJW5+J/NBLal42/j          RGSp7BpGAMiwbVndZ5DwGN40Ct1s6/h9xXVmHeO/Z3+f7sIoWt/Vv2Xq8eLawWM7xBIz          buqQ==
ARC-Message-Signature: i=2; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;         h=mime-version:content-disposition:message-id:subject:cc:to:from:date          :dkim-signature;         bh=9BWknbnpfOp3zXEiYHcsGmRJ9QSKS5HwfE7ErXpLn0M=;         b=k6u/QDO03J+8s1ucxr0CDV/CZDuk7cE9K1+MTrgU1durpX067kHQLtiSXqCFwT07O7          mHbXKqJ+x6lBpk48dkbmwVvHOjU462LNgJaMih5UifgkPLUKB5gcnm9EJiR00jGQfKu8          iPjHJoKLA7oW/j0TYcpiaL4qTrM1BAzppVCveI/Zu3zwKN7BCMjfzQHihMqgZfLScKAQ          Dp1q1dnlnbj7ruyZi2tSA5gGUogfiMtc4g7T4WdMd6Ie1rAfcisvpUZ1QmHKFWuoOTtg          0lJvL6rRhiOmXZSh/482DnSks6eG+1J6VTc9pKPLtBnPq8PqtWunCmV+nZE6dx7t5XQw          KYdA==
ARC-Authentication-Results: i=2; mx.google.com;        dkim=pass header.i=@voleatech.de header.s=selector2 header.b=Dj4wIYp6;        arc=pass (i=1 spf=pass spfdomain=voleatech.de dkim=pass dkdomain=voleatech.de dmarc=pass fromdomain=voleatech.de);        spf=pass (google.com: domain of sven.auhagen@voleatech.de designates 40.107.5.136 as permitted sender) smtp.mailfrom=sven.auhagen@voleatech.de;        dmarc=pass (p=QUARANTINE sp=QUARANTINE dis=NONE) header.from=voleatech.de
Return-Path: <sven.auhagen@voleatech.de>
Received: from EUR03-VE1-obe.outbound.protection.outlook.com (mail-eopbgr50136.outbound.protection.outlook.com. [40.107.5.136])         by mx.google.com with ESMTPS id oq12si1612689ejb.225.2020.06.22.05.01.27         for <viresh.kumar@linaro.org>         (version=TLS1_2 cipher=ECDHE-ECDSA-AES128-GCM-SHA256 bits=128/128);         Mon, 22 Jun 2020 05:01:27 -0700 (PDT)
Received-SPF: pass (google.com: domain of sven.auhagen@voleatech.de designates 40.107.5.136 as permitted sender) client-ip=40.107.5.136;
Authentication-Results: mx.google.com;        dkim=pass header.i=@voleatech.de header.s=selector2 header.b=Dj4wIYp6;        arc=pass (i=1 spf=pass spfdomain=voleatech.de dkim=pass dkdomain=voleatech.de dmarc=pass fromdomain=voleatech.de);        spf=pass (google.com: domain of sven.auhagen@voleatech.de designates 40.107.5.136 as permitted sender) smtp.mailfrom=sven.auhagen@voleatech.de;        dmarc=pass (p=QUARANTINE sp=QUARANTINE dis=NONE) header.from=voleatech.de
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;  b=DFlGrZ0NJJ0tKgl9v3qK5SGLrlylC5knvfgME7dmnRw4rlymR6Gr1sPjU7RnmqAYoK9/vOjM7Vk6PUaxCcdW/1bARaYMP9/W/5dUJ9bXa1JQ+D7hI32fdnCZMb9LpR/zijPopOKyE/xcTGM9zeYIxV6GbPnc/tmFp2Uq9PHx6N1E6P2XNp3FT3SoGInvXDW0WzLs/Bn0MFCeW+VmvJ9CRI8A5w6VR8dedBG7SdGh8jixzT6jXsv9Ji7K3VtZBps6J/Cbu5ioMp5BKfVkSE4NA5t+YxiOIFXZ4AEluBQdMlZmJ4W3e+adV1fxy2Bv4A0jr11oWsL5a8jnEikjBpaKOg==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com;  s=arcselector9901;  h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;  bh=9BWknbnpfOp3zXEiYHcsGmRJ9QSKS5HwfE7ErXpLn0M=;  b=Qh5Cgp69oarG+U6pIzY/u3wDTeMu3QcO4R+m5We9mRO/BppfWm2pifUiBc0O+AZHX080NrJWq5Bs9NizoQhscUYQEG3Wrwskq1XFvnZNIV5yAb82iQaYabmnfZ3mmbsoY6uc9y9gOyoenHRCTHAbMd7+vtHLTeEuFrxDotpa/3pN+L7rXX3ryA7jxJWey3zGDgr191gSxvx+mUr81hEyXsz1w/6MsKfBbOPZx4d6Db7l16p9vgQ9uzpFqxstrESay0GLCElMiys7t30pSpktjB0ZySuX4Hom+yxb4Aej3hkXO9MpLJ6uZuV2pgm2ABjIgIH6g03p9v8sd7AUbi5KPQ==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass  smtp.mailfrom=voleatech.de; dmarc=pass action=none header.from=voleatech.de;  dkim=pass header.d=voleatech.de; arc=none
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=voleatech.de;  s=selector2;  h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;  bh=9BWknbnpfOp3zXEiYHcsGmRJ9QSKS5HwfE7ErXpLn0M=;  b=Dj4wIYp6cK95vx1Gd0UDUuODwkwgGrsUYrEmnL3eMwPruygjiyxKEPP3ezGgTVQjH8/nqMOSYk4gRqOxeet01ST5zkRJR4twoM+tqg6ZWhG4bkJQtKXJGrV4hNsV6IJl83/rb1re04aNFg1mrftzRdDtoYWgA0prV3bW5Xtjw48=
Authentication-Results: lists.infradead.org; dkim=none (message not signed)  header.d=none;lists.infradead.org; dmarc=none action=none  header.from=voleatech.de;
Received: from AM4PR0501MB2785.eurprd05.prod.outlook.com  (2603:10a6:200:5d::11) by AM4PR0501MB2644.eurprd05.prod.outlook.com  (2603:10a6:200:61::10) with Microsoft SMTP Server (version=TLS1_2,  cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.3109.21; Mon, 22 Jun  2020 12:01:25 +0000
Received: from AM4PR0501MB2785.eurprd05.prod.outlook.com  ([fe80::39a1:e237:5fef:6f39]) by AM4PR0501MB2785.eurprd05.prod.outlook.com  ([fe80::39a1:e237:5fef:6f39%11]) with mapi id 15.20.3109.027; Mon, 22 Jun  2020 12:01:25 +0000
Date: Mon, 22 Jun 2020 14:01:23 +0200
From: Sven Auhagen <sven.auhagen@voleatech.de>
To: linux-arm-kernel@lists.infradead.org
Cc: rjw@rjwysocki.net, viresh.kumar@linaro.org, andrew@lunn.ch, 	jason@lakedaemon.net, antoine.tenart@bootlin.com, 	gregory.clement@bootlin.com, maxime.chevallier@bootlin.com, 	thomas.petazzoni@bootlin.com, miquel.raynal@bootlin.com, 	sebastian.hesselbarth@gmail.com
Subject: [PATCH 1/1 v3] cpufreq: ap806: fix cpufreq driver needs ap cpu clk
Message-ID: <20200622120123.pt23ixgudjjgxfn7@SvensMacbookPro.hq.voleatech.com>
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
X-ClientProxiedBy: AM4PR0302CA0005.eurprd03.prod.outlook.com  (2603:10a6:205:2::18) To AM4PR0501MB2785.eurprd05.prod.outlook.com  (2603:10a6:200:5d::11)
Return-Path: sven.auhagen@voleatech.de
MIME-Version: 1.0
X-MS-Exchange-MessageSentRepresentingType: 1
Received: from SvensMacbookPro.hq.voleatech.com (37.24.174.42) by AM4PR0302CA0005.eurprd03.prod.outlook.com (2603:10a6:205:2::18) with Microsoft SMTP Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.3109.21 via Frontend Transport; Mon, 22 Jun 2020 12:01:24 +0000
X-Originating-IP: [37.24.174.42]
X-MS-PublicTrafficType: Email
X-MS-Office365-Filtering-Correlation-Id: bf78da09-be40-422d-7db7-08d816a3fcbf
X-MS-TrafficTypeDiagnostic: AM4PR0501MB2644:
X-Microsoft-Antispam-PRVS: 	<AM4PR0501MB2644C9C0573B45B723D503D9EF970@AM4PR0501MB2644.eurprd05.prod.outlook.com>
X-MS-Oob-TLC-OOBClassifiers: OLM:7691;
X-Forefront-PRVS: 0442E569BC
X-MS-Exchange-SenderADCheck: 1
X-Microsoft-Antispam: BCL:0;
X-Microsoft-Antispam-Message-Info: 	SQUzOi60JUqm+3LJpN5icnyVwcXeVEhr7RX1FoM/ghWoJgahtQGkgyZYwbHEyaVlrogl39AiaTdqdOGy12WOrw7cGM5o4l8GLUtxkQUMnoYadPbKqDdMLbOTP8Y3LLftvY05+6FkzQWK1Yb2J+BKrSc4humiFpi3yXtXm3wW77OLgiPk1mhsJP0mJd6PfzfMxIrGoF13gUiFMMono4/fTPFL6RAswP4AfQ9n66ZJkm9+7KAxDCP4oK+9n5Q8xPIbhGo1MNxSgxh2WGean/tjq/vrt/rkgy+kFbdWEvpJB+ZK16+ZLrF7NJCy6tulZ+9x
X-Forefront-Antispam-Report: 	CIP:255.255.255.255;CTRY:;LANG:en;SCL:1;SRV:;IPV:NLI;SFV:NSPM;H:AM4PR0501MB2785.eurprd05.prod.outlook.com;PTR:;CAT:NONE;SFTY:;SFS:(4636009)(366004)(396003)(346002)(39830400003)(376002)(136003)(66946007)(5660300002)(508600001)(4744005)(4326008)(6916009)(66476007)(44832011)(956004)(66556008)(8936002)(86362001)(6506007)(8676002)(7416002)(26005)(7696005)(52116002)(16526019)(186003)(316002)(55016002)(2906002)(9686003)(1076003);DIR:OUT;SFP:1102;
X-MS-Exchange-AntiSpam-MessageData: 	QMcGa7n9ak9B/80KQ1LVMv/gkqocXy52SQGZWlLz7mJKr/BL6Avu5c6El88R0RZ/aOm39lmJxQ/s47Zxxfe45IAYEUZ2JJuQK8RRKIIgV9mx16UQq54BpGTbMw/9SOSVuJBsyWZpuGiMBZH6tybHyUGnhHraAHJ1zKqz9LnV95Tj5Bq/6Fsq0K1FXBtysQqcl8hR7IHDf2l1JOhzNUMx4nVtBpzxp2QzcsyrUJZD7hGOP1gr7n6J7Nv8rMztXpDaKYb89PpPfx7LVDEmyR2+LoQ/eSAn8kiAUqxC5yJxYWJiHJh9dMWrNvfx9AHISanNFLhOSsjkJKWgpCEFP3dkOATbdoXULBO7rGq+aBbzW2aHjwmUAWZ8ou3LUBlayiWdaMdtKZ7l/ubtBjO+s1MBX1ehh0eqZjBJp+LBvEaLQiUvoJdB8m4H3ojuCb1Gt0/I55HzpM0R6WmwdmIw4+CrP/5Q9G3ksyxrzSwlBYMyFnw=
X-OriginatorOrg: voleatech.de
X-MS-Exchange-CrossTenant-Network-Message-Id: bf78da09-be40-422d-7db7-08d816a3fcbf
X-MS-Exchange-CrossTenant-OriginalArrivalTime: 22 Jun 2020 12:01:25.0442  (UTC)
X-MS-Exchange-CrossTenant-FromEntityHeader: Hosted
X-MS-Exchange-CrossTenant-Id: b82a99f6-7981-4a72-9534-4d35298f847b
X-MS-Exchange-CrossTenant-MailboxType: HOSTED
X-MS-Exchange-CrossTenant-UserPrincipalName: NIHusu2d/WnvhmUC9rcQi/PORBlyS1MngY7FeGlRl3PYCk40yT5vZRaoDeSqVEVEP9wgAbSuvZnRyA5C7KeXbuzvUBG2D4CvMscIgM4GtJ8=
X-MS-Exchange-Transport-CrossTenantHeadersStamped: AM4PR0501MB2644
Content-Length: 1001
Lines: 37

The Armada 8K cpufreq driver needs the Armada AP CPU CLK
to work. This dependency is currently not satisfied and
the ARMADA_AP_CPU_CLK can not be selected independently.

Add it to the cpufreq Armada8k driver.

Fixes: f525a670533d ("cpufreq: ap806: add cpufreq driver for Armada 8K")
Signed-off-by: Sven Auhagen <sven.auhagen@voleatech.de>
---
Changelog:

v3:
* Move changelog
* Add fixes tag
* Move select from arch to cpufreq Kconfig

v2:
* Resubmission without email footer


 drivers/cpufreq/Kconfig.arm | 1 +
 1 file changed, 1 insertion(+)

diff --git a/drivers/cpufreq/Kconfig.arm b/drivers/cpufreq/Kconfig.arm
index c6cbfc8baf72..a967894c4613 100644
--- a/drivers/cpufreq/Kconfig.arm
+++ b/drivers/cpufreq/Kconfig.arm
@@ -41,6 +41,7 @@ config ARM_ARMADA_37XX_CPUFREQ
 config ARM_ARMADA_8K_CPUFREQ
 	tristate "Armada 8K CPUFreq driver"
 	depends on ARCH_MVEBU && CPUFREQ_DT
+	select ARMADA_AP_CPU_CLK
 	help
 	  This enables the CPUFreq driver support for Marvell
 	  Armada8k SOCs.
-- 
2.20.1

