From vireshk  Mon Oct 16 08:22:32 2023
Delivered-To: viresh.kumar@linaro.org
Received: from pop.gmail.com [142.251.175.108] 	by vireshk-i7 with POP3 (fetchmail-6.4.2) 	for <vireshk@localhost> (single-drop); Mon, 16 Oct 2023 08:22:32 +0530 (IST)
Received: by 2002:a05:7208:86c5:b0:76:e763:5a60 with SMTP id gr5csp1376207rbb;         Fri, 13 Oct 2023 10:39:05 -0700 (PDT)
X-Received: by 2002:a7b:cc8f:0:b0:401:dc7e:b688 with SMTP id p15-20020a7bcc8f000000b00401dc7eb688mr23683402wma.6.1697218745369;         Fri, 13 Oct 2023 10:39:05 -0700 (PDT)
ARC-Seal: i=1; a=rsa-sha256; t=1697218745; cv=none;         d=google.com; s=arc-20160816;         b=rqShxNnPNQUpNv7WxFIS01hdO2JgV2e7hX4MuqWAYcJrQvcKiSqb6+YtHzoQ4bEhW6          1Wqz9w/X+OuNvw5O9aYdoIADEiAj1kPLA/QsYQN9F6nO9p32MdEp6D8/XQSqKUchV31a          h4GrSFCe4s/vK+bp57qu4dlQu9lTeCIJJBKGIF4YzK4bLqn9RJ9E6XLZj2RSkmyl9zJT          h1V0xFssXaq0CNSasocLyFSWNc8O9G/JVmTWLzhV9GZfbrc2SvLXRs5zfpk1xZwb1oCP          PrprUVi6pkRlZxtLkKrdl8wumjtejwlzdrekmuwiu4ZOcmX+cA1SWOmonzsttYAK6Up2          ijfg==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;         h=content-transfer-encoding:mime-version:references:in-reply-to          :message-id:date:subject:cc:to:from:dkim-signature;         bh=+HZyxbaZrzegHjjHG1xEeKX3lyEz0S3pL4gqIEs+3eM=;         fh=Op8NNM6yHiniH++GLd1k83pJw334ZeWwxyo18t/ELh0=;         b=SrGT7mKC1K03GSXY/lplApz3fAh6Of6N+MfBVA5NPIXaId7EZSnylP/JnoPUN1DXfr          Ci5a19NVvI0rvAUGpmaDaT3+jkW+QUtYD/c7Sq5P9Mk1rxX5fZ0Q4GCokEfcrvQI6lEA          4idgqY2FcjG1iNdxtrtKvNL74KZN/cKjdrukF6M62fjDj33atR/l+2YQLFRLurLIJW16          qwAz3g/OEMz2sYl6BQcmXfXOKZr2Br48l7spF00KlJsSBE9We9tBaiDfMVt1ktEftj0T          KpXFYW637XrfdXv40xhzgRG34/lH7h+H36CzWVs22i4ElRKK0QJBaY7AKrwUS27eV5Wd          fjIQ==
ARC-Authentication-Results: i=1; mx.google.com;        dkim=pass header.i=@gmail.com header.s=20230601 header.b=aoVtHti3;        spf=pass (google.com: domain of ansuelsmth@gmail.com designates 209.85.220.41 as permitted sender) smtp.mailfrom=ansuelsmth@gmail.com;        dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com
Return-Path: <ansuelsmth@gmail.com>
Received: from mail-sor-f41.google.com (mail-sor-f41.google.com. [209.85.220.41])         by mx.google.com with SMTPS id 19-20020a05600c235300b00406a8521c33sor1022971wmq.1.2023.10.13.10.39.05         (Google Transport Security);         Fri, 13 Oct 2023 10:39:05 -0700 (PDT)
Received-SPF: pass (google.com: domain of ansuelsmth@gmail.com designates 209.85.220.41 as permitted sender) client-ip=209.85.220.41;
Authentication-Results: mx.google.com;        dkim=pass header.i=@gmail.com header.s=20230601 header.b=aoVtHti3;        spf=pass (google.com: domain of ansuelsmth@gmail.com designates 209.85.220.41 as permitted sender) smtp.mailfrom=ansuelsmth@gmail.com;        dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;         d=gmail.com; s=20230601; t=1697218745; x=1697823545; darn=linaro.org;         h=content-transfer-encoding:mime-version:references:in-reply-to          :message-id:date:subject:cc:to:from:from:to:cc:subject:date          :message-id:reply-to;         bh=+HZyxbaZrzegHjjHG1xEeKX3lyEz0S3pL4gqIEs+3eM=;         b=aoVtHti37rTHSH22sQ1eVTJY6cM4S9Xmb3mfFfQXvxQywIYQg7MrabW5Yf3C/nOlcl          H5yAfz4ZqwEcgfzaEcUT46J+2qx0d+1IzW7hyL5jb9fXvxwxuAX0sEk/xaCkpVIP1E1n          KLuVjFKAcw6yysjpaoSjd2JQBwJM3jF9nGkPDJuh0ySUTgiAqCD2lBloGkFJsnCDwGzc          sPdOWaTDr1Zg6tcuFYqrqSOj7Lv2nXqFSvFUicCVCPEMtUtO+z1VPz9zZPG75NHSLJW8          IEI5ZeqHvIY9nlXcubW3RHOtTNkKlAzOiNOp9+XvW9xm4vyrc1ROwGp5IuU/b6Xb9qwd          CW+g==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;         d=1e100.net; s=20230601; t=1697218745; x=1697823545;         h=content-transfer-encoding:mime-version:references:in-reply-to          :message-id:date:subject:cc:to:from:x-gm-message-state:from:to:cc          :subject:date:message-id:reply-to;         bh=+HZyxbaZrzegHjjHG1xEeKX3lyEz0S3pL4gqIEs+3eM=;         b=sfN0vrckNUgIZb9THT+wqwpkvZ56ixMKwDKTYg9k5jKPh04yq3otlxE1sAfqchg62i          rjrOB5YipifJ3IPtAdZSJgoHiDRbVz6neDMjvhdHnen5HsGntrcFuomUjoncc6LKyZTq          CntQH4y01VDVC5uq2Rx81c5+tNPs2isIQ+qIjbUE1IDrGNE5y32L90O1qcrf4HVeMvrT          eI8EEKKb4xKIBq3T4RMI60/IaIYm15BrNkUo3g0gytI9vBJZt3AfQzswY3lZFtP+ziww          ObO6yzAPCnOCXqzOI4Tw87zHriPVoMUSb7SB/lfu3vluv+CruuFLwD7wWJhk4x3gxcyx          rqKg==
X-Gm-Message-State: AOJu0YwmU6z5QEcHSN8qUcc6HBV6obOU6JzZKEGIiEZZkAH0awOHELlL 	W+gglTtgiqqnjxkaMBaEQMCZPrjhSQs=
X-Google-Smtp-Source: AGHT+IHVbVmwZE3/otPzs22R6/X6n7J2gWHh+vwuxdJ3uBEXVrVq5NBgLBHqqIkRGdNnsxGSqo5ulg==
X-Received: by 2002:a1c:4b18:0:b0:404:4b6f:d705 with SMTP id y24-20020a1c4b18000000b004044b6fd705mr24771845wma.17.1697218744536;         Fri, 13 Oct 2023 10:39:04 -0700 (PDT)
Return-Path: <ansuelsmth@gmail.com>
Received: from localhost.localdomain (93-34-89-13.ip49.fastwebnet.it. [93.34.89.13])         by smtp.googlemail.com with ESMTPSA id j11-20020a05600c42cb00b0040652e8ca13sm692074wme.43.2023.10.13.10.39.03         (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);         Fri, 13 Oct 2023 10:39:04 -0700 (PDT)
From: Christian Marangi <ansuelsmth@gmail.com>
To: Ilia Lin <ilia.lin@kernel.org>, 	Andy Gross <agross@kernel.org>, 	Bjorn Andersson <andersson@kernel.org>, 	Konrad Dybcio <konrad.dybcio@linaro.org>, 	"Rafael J. Wysocki" <rafael@kernel.org>, 	Viresh Kumar <viresh.kumar@linaro.org>, 	Rob Herring <robh+dt@kernel.org>, 	Krzysztof Kozlowski <krzysztof.kozlowski+dt@linaro.org>, 	Conor Dooley <conor+dt@kernel.org>, 	Nishanth Menon <nm@ti.com>, 	Stephen Boyd <sboyd@kernel.org>, 	Sricharan Ramabadhran <quic_srichara@quicinc.com>, 	Christian Marangi <ansuelsmth@gmail.com>, 	linux-pm@vger.kernel.org, 	linux-arm-msm@vger.kernel.org, 	devicetree@vger.kernel.org, 	linux-kernel@vger.kernel.org
Cc: Rob Herring <robh@kernel.org>
Subject: [PATCH v6 2/4] dt-bindings: opp: opp-v2-kryo-cpu: Document named opp-microvolt property
Date: Fri, 13 Oct 2023 19:38:52 +0200
Message-Id: <20231013173854.7399-3-ansuelsmth@gmail.com>
X-Mailer: git-send-email 2.40.1
In-Reply-To: <20231013173854.7399-1-ansuelsmth@gmail.com>
References: <20231013173854.7399-1-ansuelsmth@gmail.com>
MIME-Version: 1.0
Content-Transfer-Encoding: 8bit
Status: RO
Content-Length: 2319
Lines: 66

Document named opp-microvolt property for opp-v2-kryo-cpu schema.
This property is used to declare multiple voltage ranges selected on the
different values read from efuses. The selection is done based on the
speed pvs values and the named opp-microvolt property is selected by the
qcom-cpufreq-nvmem driver.

Signed-off-by: Christian Marangi <ansuelsmth@gmail.com>
Reviewed-by: Rob Herring <robh@kernel.org>
---
changes v6:
* Rebase on top of dependant series
* Fix example to use krait

Changes v5:
* Fix typo in opp items

Changes v4:
* Address comments from Rob (meaning of pvs, drop of
  driver specific info, drop of legacy single voltage OPP,
  better specify max regulators supported)
---
 .../bindings/opp/opp-v2-kryo-cpu.yaml         | 22 +++++++++++++++++++
 1 file changed, 22 insertions(+)

diff --git a/Documentation/devicetree/bindings/opp/opp-v2-kryo-cpu.yaml b/Documentation/devicetree/bindings/opp/opp-v2-kryo-cpu.yaml
index 316f9c7804e4..fd04d060c1de 100644
--- a/Documentation/devicetree/bindings/opp/opp-v2-kryo-cpu.yaml
+++ b/Documentation/devicetree/bindings/opp/opp-v2-kryo-cpu.yaml
@@ -68,6 +68,12 @@ patternProperties:
           6:  MSM8996SG, speedbin 2
           7-31:  unused
 
+          Bitmap for IPQ806x SoC:
+          0:  IPQ8062
+          1:  IPQ8064/IPQ8066/IPQ8068
+          2:  IPQ8065/IPQ8069
+          3-31:  unused
+
           Other platforms use bits directly corresponding to speedbin index.
 
       clock-latency-ns: true
@@ -262,6 +268,22 @@ examples:
             };
         };
 
+        /* Dummy opp table to give example for named opp-microvolt */
+        opp-table-2 {
+            compatible = "operating-points-v2-krait-cpu";
+            nvmem-cells = <&speedbin_efuse>;
+
+            opp-384000000 {
+                opp-hz = /bits/ 64 <384000000>;
+                opp-microvolt-speed0-pvs0 = <1000000 950000 1050000>;
+                opp-microvolt-speed0-pvs1 = <925000 878750 971250>;
+                opp-microvolt-speed0-pvs2 = <875000 831250 918750>;
+                opp-microvolt-speed0-pvs3 = <800000 760000 840000>;
+                opp-supported-hw = <0x7>;
+                clock-latency-ns = <100000>;
+            };
+        };
+
         smem {
             compatible = "qcom,smem";
             memory-region = <&smem_mem>;
-- 
2.40.1

