From vireshk  Thu Feb 16 13:33:48 2017
Delivered-To: viresh.kumar@linaro.org
Received: from gmail-pop.l.google.com [74.125.68.108] 	by vireshk-i7 with POP3 (fetchmail-6.3.26) 	for <vireshk@localhost> (single-drop); Thu, 16 Feb 2017 13:33:48 +0530 (IST)
Received: by 10.36.162.67 with SMTP id o3csp2331329iti;         Thu, 16 Feb 2017 00:03:01 -0800 (PST)
X-Received: by 10.55.137.69 with SMTP id l66mr844604qkd.133.1487232181867;         Thu, 16 Feb 2017 00:03:01 -0800 (PST)
Return-Path: <sched-tools-bounces@lists.linaro.org>
Received: from lists.linaro.org (lists.linaro.org. [54.225.227.206])         by mx.google.com with ESMTP id v26si4688769qtf.255.2017.02.16.00.03.01;         Thu, 16 Feb 2017 00:03:01 -0800 (PST)
Received-SPF: pass (google.com: domain of sched-tools-bounces@lists.linaro.org designates 54.225.227.206 as permitted sender) client-ip=54.225.227.206;
Authentication-Results: mx.google.com;        spf=pass (google.com: domain of sched-tools-bounces@lists.linaro.org designates 54.225.227.206 as permitted sender) smtp.mailfrom=sched-tools-bounces@lists.linaro.org;        dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=linaro.org
Received: by lists.linaro.org (Postfix, from userid 109) 	id 3E60F63547; Thu, 16 Feb 2017 08:03:01 +0000 (UTC)
X-Spam-Checker-Version: SpamAssassin 3.4.0 (2014-02-07) on ip-10-142-244-252
X-Spam-Level: 
X-Spam-Status: No, score=-1.9 required=5.0 tests=BAYES_00,RCVD_IN_DNSWL_NONE, 	RCVD_IN_MSPIKE_H3,RCVD_IN_MSPIKE_WL,URIBL_BLOCKED autolearn=disabled 	version=3.4.0
Received: from [127.0.0.1] (localhost [127.0.0.1]) 	by lists.linaro.org (Postfix) with ESMTP id 4914960C02; 	Thu, 16 Feb 2017 08:02:53 +0000 (UTC)
X-Original-To: sched-tools@lists.linaro.org
Delivered-To: sched-tools@lists.linaro.org
Received: by lists.linaro.org (Postfix, from userid 109)  id E2FFB60F23; Wed, 15 Feb 2017 23:43:11 +0000 (UTC)
Received: from mail-pg0-f50.google.com (mail-pg0-f50.google.com [74.125.83.50])  by lists.linaro.org (Postfix) with ESMTPS id 77E3A60741  for <sched-tools@lists.linaro.org>; Wed, 15 Feb 2017 23:43:10 +0000 (UTC)
Received: by mail-pg0-f50.google.com with SMTP id v184so518770pgv.3  for <sched-tools@lists.linaro.org>; Wed, 15 Feb 2017 15:43:10 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;  d=1e100.net; s=20161025;  h=x-gm-message-state:from:to:cc:subject:date:message-id;  bh=wm6z0ioBHhVOGzH24VmbBByOGBFLRgUJ05nvdC6TTb0=;  b=SuPTGP8p7cY32BuiVXFy+acPwq3DOXBoxqtSmfDr4JQ2+QStQIfmBymk9brMPdbnY8  rq5dl0oDZ46FPFL2NQvZMq5TZANSBtwfLOED6ut6k1J5cg1TnXns63NyKVxGqxS5hNd5  UFox3K4G3EfmuWcqBkDb36PJ/vzStx0qRM52fPeCcVQpwBIzDbdjzEWAFWAanw3cVDKb  jloz2EBXfMZ/eX+dwEaAhY9PDVNa1MBm+64G55z75QgPZeStFlemHOLEBgcr+zp1Zbnv  m3Dn4EP2gAqE6UkpaAmP3LWUZoTZbrm3DArfHEkUyW7L6WyUsZDIRKKxy55T5RrHagKJ  0glw==
X-Gm-Message-State: AMke39kCVRrTErFI7MgRFP2mU2TTnouEGu+vRRftRHUBVWJzcGUUQ/AkGvdgtNo5P3HzsNdtrGs=
X-Received: by 10.84.218.132 with SMTP id r4mr27941726pli.165.1487202189489;  Wed, 15 Feb 2017 15:43:09 -0800 (PST)
Received: from localhost.localdomain (i-global254.qualcomm.com.  [199.106.103.254])  by smtp.gmail.com with ESMTPSA id l25sm9383795pfg.134.2017.02.15.15.43.08  (version=TLS1_2 cipher=ECDHE-RSA-AES128-SHA bits=128/128);  Wed, 15 Feb 2017 15:43:08 -0800 (PST)
From: Stephen Boyd <stephen.boyd@linaro.org>
To: sched-tools@lists.linaro.org
Date: Wed, 15 Feb 2017 15:43:07 -0800
Message-Id: <20170215234307.22851-1-stephen.boyd@linaro.org>
X-Mailer: git-send-email 2.10.0.297.gf6727b0
X-Mailman-Approved-At: Thu, 16 Feb 2017 08:02:51 +0000
Cc: Olav Haugan <ohaugan@codeaurora.org>, Juri Lelli <juri.lelli@arm.com>
Subject: [Sched-tools] [PATCH v2] rtapp: Add broader support for specifying 	cpusets
X-BeenThere: sched-tools@lists.linaro.org
X-Mailman-Version: 2.1.16
Precedence: list
List-Id: Discuss tools to analyse the Linux scheduler behaviour  <sched-tools.lists.linaro.org>
List-Unsubscribe: <https://lists.linaro.org/mailman/options/sched-tools>,  <mailto:sched-tools-request@lists.linaro.org?subject=unsubscribe>
List-Archive: <http://lists.linaro.org/pipermail/sched-tools/>
List-Post: <mailto:sched-tools@lists.linaro.org>
List-Help: <mailto:sched-tools-request@lists.linaro.org?subject=help>
List-Subscribe: <https://lists.linaro.org/mailman/listinfo/sched-tools>,  <mailto:sched-tools-request@lists.linaro.org?subject=subscribe>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: sched-tools-bounces@lists.linaro.org
Sender: "Sched-tools" <sched-tools-bounces@lists.linaro.org>

RnJvbTogT2xhdiBIYXVnYW4gPG9oYXVnYW5AY29kZWF1cm9yYS5vcmc+CgpBbGxvdyBzZXR0aW5n
IG9mIGNwdXNldHMgYXQgYWxsIGxldmVscyBvZiB0aGUgc3BlYy4KClNpZ25lZC1vZmYtYnk6IE9s
YXYgSGF1Z2FuIDxvaGF1Z2FuQGNvZGVhdXJvcmEub3JnPgpTaWduZWQtb2ZmLWJ5OiBTdGVwaGVu
IEJveWQgPHN0ZXBoZW4uYm95ZEBsaW5hcm8ub3JnPgotLS0KCiogdjIgY2hhbmdlczoKIC0gQWRk
ZWQgZG9jdW1lbnRhdGlvbiBhbmQgZXhhbXBsZSBqc29uCiAtIENsYXJpZmllZCBjb21tZW50cwog
LSBBZGRlZCBjaGVjayBmb3IgaW52YWxpZCBDUFUKIC0gUmVkdWNlZCBsb2dnaW5nIGxldmVsIGZv
ciBhZmZpbml0eSBzZXR0aW5nIG1lc3NhZ2UKIC0gQ29kZSBmaXhlcyBiYXNlZCBvbiBmZWVkYmFj
awoKIGRvYy9leGFtcGxlcy90dXRvcmlhbC9leGFtcGxlNy5qc29uIHwgIDQwICsrKysrKysrKysr
KwogZG9jL3R1dG9yaWFsLnR4dCAgICAgICAgICAgICAgICAgICAgfCAgMzcgKysrKysrKysrKysK
IHNyYy9ydC1hcHAuYyAgICAgICAgICAgICAgICAgICAgICAgIHwgMTE5ICsrKysrKysrKysrKysr
KysrKysrKysrKysrKysrKystLS0tLQogc3JjL3J0LWFwcF9wYXJzZV9jb25maWcuYyAgICAgICAg
ICAgfCAgNjYgKysrKysrKysrKysrKystLS0tLS0KIHNyYy9ydC1hcHBfdHlwZXMuaCAgICAgICAg
ICAgICAgICAgIHwgIDEyICsrKy0KIDUgZmlsZXMgY2hhbmdlZCwgMjM4IGluc2VydGlvbnMoKyks
IDM2IGRlbGV0aW9ucygtKQogY3JlYXRlIG1vZGUgMTAwNjQ0IGRvYy9leGFtcGxlcy90dXRvcmlh
bC9leGFtcGxlNy5qc29uCgpkaWZmIC0tZ2l0IGEvZG9jL2V4YW1wbGVzL3R1dG9yaWFsL2V4YW1w
bGU3Lmpzb24gYi9kb2MvZXhhbXBsZXMvdHV0b3JpYWwvZXhhbXBsZTcuanNvbgpuZXcgZmlsZSBt
b2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAuLjA5M2U0YWIzYTkzYgotLS0gL2Rldi9udWxs
CisrKyBiL2RvYy9leGFtcGxlcy90dXRvcmlhbC9leGFtcGxlNy5qc29uCkBAIC0wLDAgKzEsNDAg
QEAKK3sKKwkvKgorCSAqIFNpbXBsZSB1c2UgY2FzZSB3aGljaCBjcmVhdGVzIGEgdGhyZWFkIHdp
dGggMyBwaGFzZXMgZWFjaCBydW5uaW5nIGZvcgorCSAqIDEuNW1zLiBJbiBwaGFzZSAxIHRoZSB0
aHJlYWQgd2lsbCBiZSBhZmZpbmVkIHRvIENQVSAwLCBpbiBwaGFzZSAyIGl0CisJICogd2lsbCBi
ZSBhZmZpbmVkIHRvIENQVSAxIGFuZCBpbiB0aGUgdGhpcmQgcGhhc2UgaXQgd2lsbCBiZSBhZmZp
bmVkIHRvCisJICogQ1BVcyAwLTMgKGluaGVyaXQgZnJvbSAiY3B1cyIgYXQgdGFzayBsZXZlbCku
CisJICovCisJInRhc2tzIiA6IHsKKwkJInRocmVhZDAiIDogeworCQkJImNwdXMiIDogWzAsMSwy
LDNdLAorCQkJInBoYXNlcyIgOiB7CisJCQkJInN0YXJ0IiA6IHsKKwkJCQkJImNwdXMiIDogWzBd
LAorCQkJCQkibG9vcCIgOiAxLAorCQkJCQkicnVuIiA6IDE1MDAKKwkJCQl9LAorCQkJCSJzdG9w
IiA6IHsKKwkJCQkJImNwdXMiIDogWzFdLAorCQkJCQkibG9vcCIgOiAxLAorCQkJCQkicnVuIiA6
IDE1MDAKKwkJCQl9LAorCQkJCSJuZXh0IiA6IHsKKwkJCQkJImxvb3AiIDogMSwKKwkJCQkJInJ1
biIgOiAxNTAwCisJCQkJfQorCQkJfQorCQl9CisJfSwKKwkiZ2xvYmFsIiA6IHsKKwkJImR1cmF0
aW9uIiA6IDIsCisJCSJjYWxpYnJhdGlvbiIgOiAiQ1BVMCIsCisJCSJkZWZhdWx0X3BvbGljeSIg
OiAiU0NIRURfT1RIRVIiLAorCQkicGlfZW5hYmxlZCIgOiBmYWxzZSwKKwkJImxvY2tfcGFnZXMi
IDogZmFsc2UsCisJCSJsb2dkaXIiIDogIi4vIiwKKwkJImxvZ19iYXNlbmFtZSIgOiAicnQtYXBw
MSIsCisJCSJmdHJhY2UiIDogdHJ1ZSwKKwkJImdudXBsb3QiIDogdHJ1ZQorCX0KK30KZGlmZiAt
LWdpdCBhL2RvYy90dXRvcmlhbC50eHQgYi9kb2MvdHV0b3JpYWwudHh0CmluZGV4IGQyYTk5YzNl
MWI4NC4uMWI4ZDE0YTQyYzE1IDEwMDY0NAotLS0gYS9kb2MvdHV0b3JpYWwudHh0CisrKyBiL2Rv
Yy90dXRvcmlhbC50eHQKQEAgLTIzMiw2ICsyMzIsNDMgQEAgYmVsb3cgYXJlIGVxdWFsczoKIAl9
CiB9CiAKKyJjcHVzIiBjYW4gYmUgc3BlY2lmaWVkIGF0IHRhc2sgbGV2ZWwgb3IgcGhhc2UgbGV2
ZWwuIEFzIGFuIGV4YW1wbGUsIGJlbG93CitjcmVhdGVzIHR3byB0aHJlYWRzLiBPbmUgdGhyZWFk
IHdpbGwgcnVuIHdpdGggYWZmaW5pdHkgb2YgQ1BVIDIgYW5kIDMuIFRoZQorc2Vjb25kIHRhc2sg
d2lsbCBydW4gZmlyc3QgcGhhc2Ugd2l0aCBhZmZpbml0eSB0byBDUFUgMCBhbmQgMSwgc2Vjb25k
IHBoYXNlIHdpdGgKK2FmZmluaXR5IHRvIENQVSAyLCBhbmQgdGhlIHRoaXJkIHBoYXNlIHdpdGgg
YWZmaW5pdHkgdG8gQ1BVIDQsIDUsIGFuZCA2IChpdCB3aWxsCitpbmhlcml0IHRoZSBhZmZpbml0
eSBmcm9tIHRoZSB0YXNrIGxldmVsKToKKworInRhc2siIDogeworCSJ0aHJlYWQxIiA6IHsKKwkJ
ImNwdXMiIDogWzIsM10sCisJCSJwaGFzZXMiIDogeworCQkJInBoYXNlMSIgOiB7CisJCQkJInJ1
biIgOiAxMCwKKwkJCQkic2xlZXAiIDogMTAKKwkJCX0KKwkJfQorCX0KKwkidGhyZWFkMiIgOiB7
CisJCSJjcHVzIiA6IFs0LDUsNl0sCisJCSJwaGFzZXMiIDogeworCQkJInBoYXNlMSIgOiB7CisJ
CQkJImNwdXMiIDogWzAsMV0sCisJCQkJInJ1biIgOiAxMCwKKwkJCQkic2xlZXAiIDogMTAKKwkJ
CX0KKwkJCSJwaGFzZTIiIDogeworCQkJCSJjcHVzIiA6IFsyXSwKKwkJCQkicnVuIiA6IDEwLAor
CQkJCSJzbGVlcCIgOiAxMAorCQkJfQorCQkJInBoYXNlMyIgOiB7CisJCQkJInJ1biIgOiAxMCwK
KwkJCQkic2xlZXAiIDogMTAKKwkJCX0KKwkJfQorCX0KK30KKwogKiBsb29wOiBJbnRlZ2VyLiBE
ZWZpbmUgdGhlIG51bWJlciBvZiB0aW1lcyB0aGUgcGFyZW50IG9iamVjdCBtdXN0IGJlIHJ1bi4K
IFRoZSBwYXJlbnQgb2JqZWN0IGNhbiBiZSBhIHBoYXNlIG9yIGEgdGhyZWFkLiBGb3IgcGhhc2Ug
b2JqZWN0LCB0aGUgbG9vcAogZGVmaW5lcyB0aGUgbnVtYmVyIG9mIHRpbWUgdGhlIHBoYXNlIHdp
bGwgYmUgZXhlY3V0ZWQgYmVmb3JlIHN0YXJ0aW5nIHRoZSBuZXh0CmRpZmYgLS1naXQgYS9zcmMv
cnQtYXBwLmMgYi9zcmMvcnQtYXBwLmMKaW5kZXggMGY5OTJmNTc0OGM0Li5mNmM5YWI3NmNkM2Ig
MTAwNjQ0Ci0tLSBhL3NyYy9ydC1hcHAuYworKysgYi9zcmMvcnQtYXBwLmMKQEAgLTQ0OCw2ICs0
NDgsMTA5IEBAIHNodXRkb3duKGludCBzaWcpCiAJZXhpdChFWElUX1NVQ0NFU1MpOwogfQogCitz
dGF0aWMgdm9pZCBjcmVhdGVfY3B1c2V0X3N0cihjcHVzZXRfZGF0YV90ICpjcHVfZGF0YSkKK3sK
Kwl1bnNpZ25lZCBpbnQgY3B1X2NvdW50ID0gQ1BVX0NPVU5UX1MoY3B1X2RhdGEtPmNwdXNldHNp
emUsCisJCQkJCQkJY3B1X2RhdGEtPmNwdXNldCk7CisJdW5zaWduZWQgaW50IGk7CisJdW5zaWdu
ZWQgaW50IGlkeCA9IDA7CisKKwkvKiBBc3N1bWUgd2UgY2FuIGdvIHVwIHRvIDk5OTkgY3B1cy4g
RWFjaCBjcHUgd291bGQgdGFrZSB1cCB0byA0ICsgMgorCSAqIGJ5dGVzICg0IGZvciB0aGUgbnVt
YmVyIGFuZCAyIGZvciB0aGUgY29tbWEgYW5kIHNwYWNlKS4gMiBieXRlcworCSAqIGZvciBiZWdp
bm5pbmcgYnJhY2tldCArIHNwYWNlIGFuZCAyIGJ5dGVzIGZvciBlbmQgYnJhY2tldCBhbmQgc3Bh
Y2UKKwkgKiBhbmQgZmluYWxseSBudWxsLXRlcm1pbmF0b3IuCisJICovCisJdW5zaWduZWQgaW50
IHNpemVfbmVlZGVkID0gY3B1X2NvdW50ICogNiArIDIgKyAyICsgMTsKKworCWNwdV9kYXRhLT5j
cHVzZXRfc3RyID0gbWFsbG9jKHNpemVfbmVlZGVkKTsKKwlzdHJjcHkoY3B1X2RhdGEtPmNwdXNl
dF9zdHIsICJbICIpOworCWlkeCArPSAyOworCisJZm9yIChpID0gMDsgaSA8IDEwMDAwICYmIGNw
dV9jb3VudDsgKytpKSB7CisJCXVuc2lnbmVkIGludCBuOworCisJCWlmIChDUFVfSVNTRVQoaSwg
Y3B1X2RhdGEtPmNwdXNldCkpIHsKKwkJCS0tY3B1X2NvdW50OworCQkJaWYgKHNpemVfbmVlZGVk
IDw9IChpZHggKyAxKSkgeworCQkJCWxvZ19lcnJvcigiTm90IGVub3VnaCBtZW1vcnkgZm9yIGFy
cmF5Iik7CisJCQkJZXhpdChFWElUX0ZBSUxVUkUpOworCQkJfQorCQkJbiA9IHNucHJpbnRmKCZj
cHVfZGF0YS0+Y3B1c2V0X3N0cltpZHhdLAorCQkJCQkJc2l6ZV9uZWVkZWQgLSBpZHggLSAxLCAi
JWQiLCBpKTsKKwkJCWlmIChuID4gMCkgeworCQkJCWlkeCArPSBuOworCQkJfSBlbHNlIHsKKwkJ
CQlsb2dfZXJyb3IoIkVycm9yIGNyZWF0aW5nIGFycmF5Iik7CisJCQkJZXhpdChFWElUX0ZBSUxV
UkUpOworCQkJfQorCQkJaWYgKHNpemVfbmVlZGVkIDw9IChpZHggKyAxKSkgeworCQkJCWxvZ19l
cnJvcigiTm90IGVub3VnaCBtZW1vcnkgZm9yIGFycmF5Iik7CisJCQkJZXhpdChFWElUX0ZBSUxV
UkUpOworCQkJfQorCQkJaWYgKGNwdV9jb3VudCkgeworCQkJCXN0cm5jYXQoY3B1X2RhdGEtPmNw
dXNldF9zdHIsICIsICIsCisJCQkJCQkJc2l6ZV9uZWVkZWQgLSBpZHggLSAxKTsKKwkJCQlpZHgg
Kz0gMjsKKwkJCX0KKwkJfQorCX0KKwlzdHJuY2F0KGNwdV9kYXRhLT5jcHVzZXRfc3RyLCAiIF0i
LCBzaXplX25lZWRlZCAtIGlkeCAtIDEpOworfQorCitzdGF0aWMgdm9pZCBzZXRfdGhyZWFkX2Fm
ZmluaXR5KHRocmVhZF9kYXRhX3QgKmRhdGEsIGNwdXNldF9kYXRhX3QgKmNwdV9kYXRhKQorewor
CWludCByZXQ7CisJY3B1c2V0X2RhdGFfdCAqYWN0dWFsX2NwdV9kYXRhID0gJmRhdGEtPmNwdV9k
YXRhOworCisJaWYgKGRhdGEtPmRlZl9jcHVfZGF0YS5jcHVzZXQgPT0gTlVMTCkgeworCQkvKiBH
ZXQgZGVmYXVsdCBhZmZpbml0eSAqLworCQljcHVfc2V0X3QgY3B1c2V0OworCQl1bnNpZ25lZCBp
bnQgY3B1X2NvdW50OworCQl1bnNpZ25lZCBpbnQgY3B1ID0gMDsKKworCQlyZXQgPSBwdGhyZWFk
X2dldGFmZmluaXR5X25wKHB0aHJlYWRfc2VsZigpLAorCQkJCQkJICAgIHNpemVvZihjcHVfc2V0
X3QpLCAmY3B1c2V0KTsKKwkJaWYgKHJldCAhPSAwKSB7CisJCQllcnJubyA9IHJldDsKKwkJCXBl
cnJvcigicHRocmVhZF9nZXRfYWZmaW5pdHkiKTsKKwkJCWV4aXQoRVhJVF9GQUlMVVJFKTsKKwkJ
fQorCQljcHVfY291bnQgPSBDUFVfQ09VTlQoJmNwdXNldCk7CisJCWRhdGEtPmRlZl9jcHVfZGF0
YS5jcHVzZXRzaXplID0gQ1BVX0FMTE9DX1NJWkUoY3B1X2NvdW50KTsKKwkJZGF0YS0+ZGVmX2Nw
dV9kYXRhLmNwdXNldCA9IENQVV9BTExPQyhjcHVfY291bnQpOworCQltZW1jcHkoZGF0YS0+ZGVm
X2NwdV9kYXRhLmNwdXNldCwgJmNwdXNldCwKKwkJCQkJCWRhdGEtPmRlZl9jcHVfZGF0YS5jcHVz
ZXRzaXplKTsKKwkJY3JlYXRlX2NwdXNldF9zdHIoJmRhdGEtPmRlZl9jcHVfZGF0YSk7CisJCWRh
dGEtPmN1cnJfY3B1X2RhdGEgPSAmZGF0YS0+ZGVmX2NwdV9kYXRhOworCX0KKworCS8qIE9yZGVy
IG9mIHByZWZlcmVuY2U6CisJICogMS4gUGhhc2UgY3B1c2V0CisJICogMi4gVGFzayBsZXZlbCBj
cHVzZXQKKwkgKiAzLiBEZWZhdWx0IGNwdXNldAorCSovCisJaWYgKGNwdV9kYXRhLT5jcHVzZXQg
IT0gTlVMTCkKKwkJYWN0dWFsX2NwdV9kYXRhID0gY3B1X2RhdGE7CisKKwlpZiAoYWN0dWFsX2Nw
dV9kYXRhLT5jcHVzZXQgPT0gTlVMTCkKKwkJYWN0dWFsX2NwdV9kYXRhID0gJmRhdGEtPmRlZl9j
cHVfZGF0YTsKKworCWlmICghQ1BVX0VRVUFMKGFjdHVhbF9jcHVfZGF0YS0+Y3B1c2V0LCBkYXRh
LT5jdXJyX2NwdV9kYXRhLT5jcHVzZXQpKQorCXsKKwkJbG9nX2RlYnVnKCJbJWRdIHNldHRpbmcg
Y3B1IGFmZmluaXR5IHRvIENQVShzKSAlcyIsIGRhdGEtPmluZCwKKwkJCWFjdHVhbF9jcHVfZGF0
YS0+Y3B1c2V0X3N0cik7CisJCXJldCA9IHB0aHJlYWRfc2V0YWZmaW5pdHlfbnAocHRocmVhZF9z
ZWxmKCksCisJCQkJCQlhY3R1YWxfY3B1X2RhdGEtPmNwdXNldHNpemUsCisJCQkJCQlhY3R1YWxf
Y3B1X2RhdGEtPmNwdXNldCk7CisJCWlmIChyZXQgIT0gMCkgeworCQkJZXJybm8gPSByZXQ7CisJ
CQlwZXJyb3IoInB0aHJlYWRfc2V0YWZmaW5pdHlfbnAiKTsKKwkJCWV4aXQoRVhJVF9GQUlMVVJF
KTsKKwkJfQorCQlkYXRhLT5jdXJyX2NwdV9kYXRhID0gYWN0dWFsX2NwdV9kYXRhOworCX0KK30K
Kwogdm9pZCAqdGhyZWFkX2JvZHkodm9pZCAqYXJnKQogewogCXRocmVhZF9kYXRhX3QgKmRhdGEg
PSAodGhyZWFkX2RhdGFfdCopIGFyZzsKQEAgLTQ3NSwyMCArNTc4LDYgQEAgdm9pZCAqdGhyZWFk
X2JvZHkodm9pZCAqYXJnKQogCS8qIEdldCB0aGUgMXN0IHBoYXNlJ3MgZGF0YSAqLwogCXBkYXRh
ID0gJmRhdGEtPnBoYXNlc1swXTsKIAotCS8qIFNldCB0aHJlYWQgYWZmaW5pdHkgKi8KLQlpZiAo
ZGF0YS0+Y3B1c2V0ICE9IE5VTEwpCi0JewotCQlsb2dfbm90aWNlKCJbJWRdIHNldHRpbmcgY3B1
IGFmZmluaXR5IHRvIENQVShzKSAlcyIsIGRhdGEtPmluZCwKLQkJCSBkYXRhLT5jcHVzZXRfc3Ry
KTsKLQkJcmV0ID0gcHRocmVhZF9zZXRhZmZpbml0eV9ucChwdGhyZWFkX3NlbGYoKSwgc2l6ZW9m
KGNwdV9zZXRfdCksCi0JCQkJCQlkYXRhLT5jcHVzZXQpOwotCQlpZiAocmV0IDwgMCkgewotCQkJ
ZXJybm8gPSByZXQ7Ci0JCQlwZXJyb3IoInB0aHJlYWRfc2V0YWZmaW5pdHlfbnAiKTsKLQkJCWV4
aXQoRVhJVF9GQUlMVVJFKTsKLQkJfQotCX0KLQogCS8qIFNldCBzY2hlZHVsaW5nIHBvbGljeSBh
bmQgcHJpbnQgcHJldHR5IGluZm8gb24gc3Rkb3V0ICovCiAJbG9nX25vdGljZSgiWyVkXSBVc2lu
ZyAlcyBwb2xpY3kgd2l0aCBwcmlvcml0eSAlZCIsIGRhdGEtPmluZCwgZGF0YS0+c2NoZWRfcG9s
aWN5X2Rlc2NyLCBkYXRhLT5zY2hlZF9wcmlvKTsKIAlzd2l0Y2ggKGRhdGEtPnNjaGVkX3BvbGlj
eSkKQEAgLTYzNiw2ICs3MjUsOCBAQCB2b2lkICp0aHJlYWRfYm9keSh2b2lkICphcmcpCiAJd2hp
bGUgKGNvbnRpbnVlX3J1bm5pbmcgJiYgKGkgIT0gZGF0YS0+bG9vcCkpIHsKIAkJc3RydWN0IHRp
bWVzcGVjIHRfZGlmZiwgdF9yZWxfc3RhcnQ7CiAKKwkJc2V0X3RocmVhZF9hZmZpbml0eShkYXRh
LCAmcGRhdGEtPmNwdV9kYXRhKTsKKwogCQlpZiAob3B0cy5mdHJhY2UpCiAJCQlsb2dfZnRyYWNl
KGZ0X2RhdGEubWFya2VyX2ZkLCAiWyVkXSBiZWdpbnMgbG9vcCAlZCBwaGFzZSAlZCBzdGVwICVk
IiwgZGF0YS0+aW5kLCBpLCBqLCBsb29wKTsKIAkJbG9nX2RlYnVnKCJbJWRdIGJlZ2lucyBsb29w
ICVkIHBoYXNlICVkIHN0ZXAgJWQiLCBkYXRhLT5pbmQsIGksIGosIGxvb3ApOzsKZGlmZiAtLWdp
dCBhL3NyYy9ydC1hcHBfcGFyc2VfY29uZmlnLmMgYi9zcmMvcnQtYXBwX3BhcnNlX2NvbmZpZy5j
CmluZGV4IGU1ZWY4N2Y2ZWUzZS4uMDZiMGNmMTIzMmE5IDEwMDY0NAotLS0gYS9zcmMvcnQtYXBw
X3BhcnNlX2NvbmZpZy5jCisrKyBiL3NyYy9ydC1hcHBfcGFyc2VfY29uZmlnLmMKQEAgLTIwLDYg
KzIwLDcgQEAgRm91bmRhdGlvbiwgSW5jLiwgNTEgRnJhbmtsaW4gU3RyZWV0LCBGaWZ0aCBGbG9v
ciwgQm9zdG9uLCBNQSAgMDIxMTAtMTMwMSwgVVNBLgogKi8KICNpbmNsdWRlIDxqc29uLWMvYml0
cy5oPgogI2luY2x1ZGUgInJ0LWFwcF9wYXJzZV9jb25maWcuaCIKKyNpbmNsdWRlIDx1bmlzdGQu
aD4KIAogI2RlZmluZSBQRlggIltqc29uXSAiCiAjZGVmaW5lIFBGTCAiICAgICAgICAgIlBGWApA
QCAtNTk2LDYgKzU5Nyw0MiBAQCBvYmpfaXNfZXZlbnQoY2hhciAqbmFtZSkKICAgICByZXR1cm4g
MDsKIH0KIAorc3RhdGljIHZvaWQgcGFyc2VfY3B1c2V0X2RhdGEoc3RydWN0IGpzb25fb2JqZWN0
ICpvYmosIGNwdXNldF9kYXRhX3QgKmRhdGEpCit7CisJc3RydWN0IGpzb25fb2JqZWN0ICpjcHVz
ZXRfb2JqLCAqY3B1OworCXVuc2lnbmVkIGludCBtYXhfY3B1ID0gc3lzY29uZihfU0NfTlBST0NF
U1NPUlNfQ09ORikgLSAxOworCisJLyogY3B1c2V0ICovCisJY3B1c2V0X29iaiA9IGdldF9pbl9v
YmplY3Qob2JqLCAiY3B1cyIsIFRSVUUpOworCWlmIChjcHVzZXRfb2JqKSB7CisJCXN0cnVjdCBh
cnJheV9saXN0ICpjcHVzZXQ7CisJCXVuc2lnbmVkIGludCBpOworCQl1bnNpZ25lZCBpbnQgY3B1
X2lkeDsKKworCQlhc3N1cmVfdHlwZV9pcyhjcHVzZXRfb2JqLCBvYmosICJjcHVzIiwganNvbl90
eXBlX2FycmF5KTsKKwkJZGF0YS0+Y3B1c2V0X3N0ciA9IHN0cmR1cChqc29uX29iamVjdF90b19q
c29uX3N0cmluZyhjcHVzZXRfb2JqKSk7CisJCWRhdGEtPmNwdXNldHNpemUgPSBzaXplb2YoY3B1
X3NldF90KTsKKwkJZGF0YS0+Y3B1c2V0ID0gbWFsbG9jKGRhdGEtPmNwdXNldHNpemUpOworCQlD
UFVfWkVSTyhkYXRhLT5jcHVzZXQpOworCQlmb3IgKGkgPSAwOyBpIDwganNvbl9vYmplY3RfYXJy
YXlfbGVuZ3RoKGNwdXNldF9vYmopOyBpKyspIHsKKwkJCWNwdSA9IGpzb25fb2JqZWN0X2FycmF5
X2dldF9pZHgoY3B1c2V0X29iaiwgaSk7CisJCQljcHVfaWR4ID0ganNvbl9vYmplY3RfZ2V0X2lu
dChjcHUpOworCQkJaWYgKGNwdV9pZHggPiBtYXhfY3B1KSB7CisJCQkJbG9nX2NyaXRpY2FsKFBJ
TjIgIkludmFsaWQgY3B1ICVkIGluIGNwdXNldCAlcyIsIGNwdV9pZHgsIGRhdGEtPmNwdXNldF9z
dHIpOworCQkJCWZyZWUoZGF0YS0+Y3B1c2V0KTsKKwkJCQlmcmVlKGRhdGEtPmNwdXNldF9zdHIp
OworCQkJCWV4aXQoRVhJVF9JTlZfQ09ORklHKTsKKwkJCX0KKwkJCUNQVV9TRVQoY3B1X2lkeCwg
ZGF0YS0+Y3B1c2V0KTsKKwkJfQorCX0gZWxzZSB7CisJCWRhdGEtPmNwdXNldF9zdHIgPSBzdHJk
dXAoIi0iKTsKKwkJZGF0YS0+Y3B1c2V0ID0gTlVMTDsKKwkJZGF0YS0+Y3B1c2V0c2l6ZSA9IDA7
CisJfQorCWxvZ19pbmZvKFBJTiAia2V5OiBjcHVzICVzIiwgZGF0YS0+Y3B1c2V0X3N0cik7Cit9
CisKIHN0YXRpYyB2b2lkCiBwYXJzZV90aHJlYWRfcGhhc2VfZGF0YShzdHJ1Y3QganNvbl9vYmpl
Y3QgKm9iaiwKIAkJICBwaGFzZV9kYXRhX3QgKmRhdGEsIHJ0YXBwX29wdGlvbnNfdCAqb3B0cywg
bG9uZyB0YWcpCkBAIC02MjksNiArNjY2LDcgQEAgcGFyc2VfdGhyZWFkX3BoYXNlX2RhdGEoc3Ry
dWN0IGpzb25fb2JqZWN0ICpvYmosCiAJCQlpKys7CiAJCX0KIAl9CisJcGFyc2VfY3B1c2V0X2Rh
dGEob2JqLCAmZGF0YS0+Y3B1X2RhdGEpOwogfQogCiBzdGF0aWMgdm9pZApAQCAtNjM3LDggKzY3
NSw4IEBAIHBhcnNlX3RocmVhZF9kYXRhKGNoYXIgKm5hbWUsIHN0cnVjdCBqc29uX29iamVjdCAq
b2JqLCBpbnQgaW5kZXgsCiB7CiAJY2hhciAqcG9saWN5OwogCWNoYXIgZGVmX3BvbGljeVtSVEFQ
UF9QT0xJQ1lfREVTQ1JfTEVOR1RIXTsKLQlzdHJ1Y3QganNvbl9vYmplY3QgKmNwdXNldF9vYmos
ICpwaGFzZXNfb2JqLCAqY3B1LCAqcmVzb3VyY2VzLCAqbG9ja3M7Ci0JaW50IGksIGNwdV9pZHgs
IHByaW9yX2RlZjsKKwlzdHJ1Y3QganNvbl9vYmplY3QgKnBoYXNlc19vYmosICpyZXNvdXJjZXMs
ICpsb2NrczsKKwlpbnQgcHJpb3JfZGVmOwogCiAJbG9nX2luZm8oUEZYICJQYXJzaW5nIHRocmVh
ZCAlcyBbJWRdIiwgbmFtZSwgaW5kZXgpOwogCkBAIC02NDcsOCArNjg1LDExIEBAIHBhcnNlX3Ro
cmVhZF9kYXRhKGNoYXIgKm5hbWUsIHN0cnVjdCBqc29uX29iamVjdCAqb2JqLCBpbnQgaW5kZXgs
CiAJZGF0YS0+aW5kID0gaW5kZXg7CiAJZGF0YS0+bmFtZSA9IHN0cmR1cChuYW1lKTsKIAlkYXRh
LT5sb2NrX3BhZ2VzID0gb3B0cy0+bG9ja19wYWdlczsKLQlkYXRhLT5jcHVzZXQgPSBOVUxMOwot
CWRhdGEtPmNwdXNldF9zdHIgPSBOVUxMOworCWRhdGEtPmNwdV9kYXRhLmNwdXNldCA9IE5VTEw7
CisJZGF0YS0+Y3B1X2RhdGEuY3B1c2V0X3N0ciA9IE5VTEw7CisJZGF0YS0+Y3Vycl9jcHVfZGF0
YSA9IE5VTEw7CisJZGF0YS0+ZGVmX2NwdV9kYXRhLmNwdXNldCA9IE5VTEw7CisJZGF0YS0+ZGVm
X2NwdV9kYXRhLmNwdXNldF9zdHIgPSBOVUxMOwogCiAJLyogcG9saWN5ICovCiAJcG9saWN5X3Rv
X3N0cmluZyhvcHRzLT5wb2xpY3ksIGRlZl9wb2xpY3kpOwpAQCAtNjgyLDIyICs3MjMsNyBAQCBw
YXJzZV90aHJlYWRfZGF0YShjaGFyICpuYW1lLCBzdHJ1Y3QganNvbl9vYmplY3QgKm9iaiwgaW50
IGluZGV4LAogCQlkYXRhLT5kZWFkbGluZSA9IGdldF9pbnRfdmFsdWVfZnJvbShvYmosICJkZWFk
bGluZSIsIFRSVUUsIGRhdGEtPnBlcmlvZCk7CiAKIAkvKiBjcHVzZXQgKi8KLQljcHVzZXRfb2Jq
ID0gZ2V0X2luX29iamVjdChvYmosICJjcHVzIiwgVFJVRSk7Ci0JaWYgKGNwdXNldF9vYmopIHsK
LQkJYXNzdXJlX3R5cGVfaXMoY3B1c2V0X29iaiwgb2JqLCAiY3B1cyIsIGpzb25fdHlwZV9hcnJh
eSk7Ci0JCWRhdGEtPmNwdXNldF9zdHIgPSBzdHJkdXAoanNvbl9vYmplY3RfdG9fanNvbl9zdHJp
bmcoY3B1c2V0X29iaikpOwotCQlkYXRhLT5jcHVzZXQgPSBtYWxsb2Moc2l6ZW9mKGNwdV9zZXRf
dCkpOwotCQlDUFVfWkVSTyhkYXRhLT5jcHVzZXQpOwotCQlmb3IgKGkgPSAwOyBpIDwganNvbl9v
YmplY3RfYXJyYXlfbGVuZ3RoKGNwdXNldF9vYmopOyBpKyspIHsKLQkJCWNwdSA9IGpzb25fb2Jq
ZWN0X2FycmF5X2dldF9pZHgoY3B1c2V0X29iaiwgaSk7Ci0JCQljcHVfaWR4ID0ganNvbl9vYmpl
Y3RfZ2V0X2ludChjcHUpOwotCQkJQ1BVX1NFVChjcHVfaWR4LCBkYXRhLT5jcHVzZXQpOwotCQl9
Ci0JfSBlbHNlIHsKLQkJZGF0YS0+Y3B1c2V0X3N0ciA9IHN0cmR1cCgiLSIpOwotCQlkYXRhLT5j
cHVzZXQgPSBOVUxMOwotCX0KLQlsb2dfaW5mbyhQSU4gImtleTogY3B1cyAlcyIsIGRhdGEtPmNw
dXNldF9zdHIpOworCXBhcnNlX2NwdXNldF9kYXRhKG9iaiwgJmRhdGEtPmNwdV9kYXRhKTsKIAog
CS8qIGluaXRpYWwgZGVsYXkgKi8KIAlkYXRhLT5kZWxheSA9IGdldF9pbnRfdmFsdWVfZnJvbShv
YmosICJkZWxheSIsIFRSVUUsIDApOwpkaWZmIC0tZ2l0IGEvc3JjL3J0LWFwcF90eXBlcy5oIGIv
c3JjL3J0LWFwcF90eXBlcy5oCmluZGV4IDViODM0NWZjZjZhYS4uOTUxNzZkNDM0MmY4IDEwMDY0
NAotLS0gYS9zcmMvcnQtYXBwX3R5cGVzLmgKKysrIGIvc3JjL3J0LWFwcF90eXBlcy5oCkBAIC0x
MjMsMTAgKzEyMywxNyBAQCB0eXBlZGVmIHN0cnVjdCBfZXZlbnRfZGF0YV90IHsKIAlpbnQgY291
bnQ7CiB9IGV2ZW50X2RhdGFfdDsKIAordHlwZWRlZiBzdHJ1Y3QgX2NwdXNldF9kYXRhX3Qgewor
CWNwdV9zZXRfdCAqY3B1c2V0OworCWNoYXIgKmNwdXNldF9zdHI7CisJc2l6ZV90IGNwdXNldHNp
emU7Cit9IGNwdXNldF9kYXRhX3Q7CisKIHR5cGVkZWYgc3RydWN0IF9waGFzZV9kYXRhX3Qgewog
CWludCBsb29wOwogCWV2ZW50X2RhdGFfdCAqZXZlbnRzOwogCWludCBuYmV2ZW50czsKKwljcHVz
ZXRfZGF0YV90IGNwdV9kYXRhOwogfSBwaGFzZV9kYXRhX3Q7CiAKIHR5cGVkZWYgc3RydWN0IF90
aHJlYWRfZGF0YV90IHsKQEAgLTEzNSw4ICsxNDIsOSBAQCB0eXBlZGVmIHN0cnVjdCBfdGhyZWFk
X2RhdGFfdCB7CiAJaW50IGxvY2tfcGFnZXM7CiAJaW50IGR1cmF0aW9uOwogCXJ0YXBwX3Jlc291
cmNlX3QgKipyZXNvdXJjZXM7Ci0JY3B1X3NldF90ICpjcHVzZXQ7Ci0JY2hhciAqY3B1c2V0X3N0
cjsKKwljcHVzZXRfZGF0YV90IGNwdV9kYXRhOyAvKiBjcHUgc2V0IGluZm9ybWF0aW9uICovCisJ
Y3B1c2V0X2RhdGFfdCAqY3Vycl9jcHVfZGF0YTsgLyogQ3VycmVudCBjcHUgc2V0IGJlaW5nIHVz
ZWQgKi8KKwljcHVzZXRfZGF0YV90IGRlZl9jcHVfZGF0YTsgLyogRGVmYXVsdCBjcHUgc2V0IGZv
ciB0YXNrICovCiAKIAl1bnNpZ25lZCBsb25nIHJ1bnRpbWUsIGRlYWRsaW5lLCBwZXJpb2Q7CiAK
LS0gCjIuMTAuMC4yOTcuZ2Y2NzI3YjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fClNjaGVkLXRvb2xzIG1haWxpbmcgbGlzdApTY2hlZC10b29sc0BsaXN0
cy5saW5hcm8ub3JnCmh0dHBzOi8vbGlzdHMubGluYXJvLm9yZy9tYWlsbWFuL2xpc3RpbmZvL3Nj
aGVkLXRvb2xzCg==

